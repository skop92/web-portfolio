
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Naive Bayes -luokittelua akkujärjestelmille &#8212; Solar panel data project</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Usean mallin luokittelua akkujärjestelmille" href="../Tehtava-05/battery_classification.html" />
    <link rel="prev" title="Akkuluokittelu" href="../docs/70-Jupyter-Book/akkuluokittelu.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Solar panel data project</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../docs/70-Jupyter-Book/index.html">
                    Solar panel data project
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data-analyysi
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Tehtava-03/paneelivalmistaja_asentaja_visualisointi.html">
   Valmistajat ja asentajat
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Tehtava-03/esik_total_installed_price.html">
   Hintojen tutkiminen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Tehtava-03/price_trends.html">
   Hintakehitys
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Tehtava-03/esik_system_size_DC.html">
   Sähkötehon tutkiminen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Tehtava-03/system_size_trend.html">
   Sähkötehon kehitys
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../docs/70-Jupyter-Book/kartat.html">
   Karttalinkit
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Tehtava-03/solar_panel_technologies.html">
   Aurinkopaneeleiden teknologiat
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Esikäsittelijä
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../docs/40-Datan-kuvaus-ja-esik%C3%A4sittely/preprocessor_dokumentointi.html">
   Esikäsittelijän dokumentaatio
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../docs/70-Jupyter-Book/esikasittelijan_testit.html">
   Esikäsittelijän testit
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tests/self_defined_cols_test.html">
     Itse määritellyt sarakkeet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tests/price_preprocessor_test.html">
     Asennuksen hinta
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tests/size_preprocessor_test.html">
     Järjestelmän sähköteho
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Koneoppiminen
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../docs/70-Jupyter-Book/akkuluokittelu.html">
   Akkuluokittelu
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Naive Bayes -luokittelua akkujärjestelmille
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Tehtava-05/battery_classification.html">
     Usean mallin luokittelua akkujärjestelmille
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Tehtava-05/rfc_model.html">
   Random Forest Classifier
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Tehtava-05/ML_analyysi.html">
     Aurinkopaneli pisteytys koneoppimisen haasteet.
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Tehtava-05/klusteroinnin_analysointia.html">
   Asennusten maantieteellinen klusterointi
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../docs/70-Jupyter-Book/aikasarja.html">
   Asennusmäärän ennustaminen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../docs/50-Koneoppiminen/asennusten_aikasarjaennustus_final.html">
     Asennusmäärän ennustaminen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Tehtava-05/asennusten_aikasarjaennustus_valikoitu.html">
     Asennusmäärän ennustaminen vertaamalla vuoden takaiseen
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Malli tuotantoon
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Tehtava-06/mallit_tuotantoon.html">
   Mallit tuotantoon
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../docs/70-Jupyter-Book/mercury_src.html">
   Mercury lähdekoodit
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Tehtava-06/Mercury_clustering.html">
     Mercury clustering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Tehtava-06/Mercury_RFC_SPC.html">
     ML test GUI for Random Forest Classifier
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/Tehtava-04/naive_bayes_batteries.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/Tehtava-04/naive_bayes_batteries.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#kirjastot">
   Kirjastot
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#esikasittelijan-ajaminen">
   Esikäsittelijän ajaminen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#datan-kasittely-malleja-varten">
   Datan käsittely malleja varten
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mallien-ajo">
   Mallien ajo
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#luokittelu-ja-sen-tarkkuus">
   Luokittelu ja sen tarkkuus
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gaussiannb">
     GaussianNB
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#complementnb">
     ComplementNB
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mita-luokittelu-kaytannossa-teki">
   Mitä luokittelu käytännössä teki?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#akkujarjestelmien-osuus">
     Akkujärjestelmien osuus
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#mallin-tuloksia-asentajien-mukaan">
       Mallin tuloksia asentajien mukaan
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loppupaatelmat">
   Loppupäätelmät
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#havainto-datasta">
     Havainto datasta
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Naive Bayes -luokittelua akkujärjestelmille</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#kirjastot">
   Kirjastot
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#esikasittelijan-ajaminen">
   Esikäsittelijän ajaminen
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#datan-kasittely-malleja-varten">
   Datan käsittely malleja varten
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mallien-ajo">
   Mallien ajo
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#luokittelu-ja-sen-tarkkuus">
   Luokittelu ja sen tarkkuus
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gaussiannb">
     GaussianNB
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#complementnb">
     ComplementNB
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mita-luokittelu-kaytannossa-teki">
   Mitä luokittelu käytännössä teki?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#akkujarjestelmien-osuus">
     Akkujärjestelmien osuus
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#mallin-tuloksia-asentajien-mukaan">
       Mallin tuloksia asentajien mukaan
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loppupaatelmat">
   Loppupäätelmät
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#havainto-datasta">
     Havainto datasta
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="naive-bayes-luokittelua-akkujarjestelmille">
<h1>Naive Bayes -luokittelua akkujärjestelmille<a class="headerlink" href="#naive-bayes-luokittelua-akkujarjestelmille" title="Permalink to this headline">#</a></h1>
<p>Tässä luodaan esikäsittelijän ja lisäesikäsittelyn avulla otos datasta, jolla testataan kahden Naive Bayes -luokittelijan kykyä päätellä, onko järjestelmässä akku pelkän hinnan [$/W] ja asentajan perusteella.</p>
<section id="kirjastot">
<h2>Kirjastot<a class="headerlink" href="#kirjastot" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">GaussianNB</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">ComplementNB</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">confusion_matrix</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">MinMaxScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">import</span> <span class="nn">importlib.util</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;../Tehtava-03/preprocessor.py&quot;</span><span class="p">;</span> <span class="n">module_name</span> <span class="o">=</span> <span class="s2">&quot;preprocessor&quot;</span><span class="p">;</span> <span class="n">spec</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">spec_from_file_location</span><span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
<span class="n">esik</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">module_from_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">);</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">module_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">esik</span><span class="p">;</span> <span class="n">spec</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">exec_module</span><span class="p">(</span><span class="n">esik</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="esikasittelijan-ajaminen">
<h2>Esikäsittelijän ajaminen<a class="headerlink" href="#esikasittelijan-ajaminen" title="Permalink to this headline">#</a></h2>
<p>Kutsutaan esikäsittelijää. Käytetään oletusasetuksia eli annetaan parametrina vain lista tarvittavista sarakkeista.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">price_col</span> <span class="o">=</span> <span class="s1">&#39;price_per_W&#39;</span>
<span class="n">customer_segment</span> <span class="o">=</span> <span class="s1">&#39;customer_segment&#39;</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">price_col</span><span class="p">,</span> <span class="s1">&#39;installer_name&#39;</span><span class="p">,</span> <span class="s1">&#39;battery_storage&#39;</span><span class="p">,</span> <span class="n">customer_segment</span><span class="p">]</span>

<span class="n">df_all</span> <span class="o">=</span> <span class="n">esik</span><span class="o">.</span><span class="n">esik</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;df_all.shape:&quot;</span><span class="p">,</span> <span class="n">df_all</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>df_all.shape: (1000000, 5)
</pre></div>
</div>
</div>
</div>
</section>
<section id="datan-kasittely-malleja-varten">
<h2>Datan käsittely malleja varten<a class="headerlink" href="#datan-kasittely-malleja-varten" title="Permalink to this headline">#</a></h2>
<p>Luokittelun perustana on hinta ja asentaja, joten poistetaan rivit, joilta kyseiset tiedot puuttuvat. Supistetaan testidataa lisää ensimmäisiä testejä varten rajaamalla se yhteen vuoteen ja yhteen asiakassegmenttiin. Joukosta poistetaan myös kalleimmat järjestelmät ja valitaan vain tietty määrä supistetun joukon yleisimpiä asentajia, joista tehdään omat sarakkeet <code class="docutils literal notranslate"><span class="pre">pd.get_dummies</span></code> metodilla. Lopuksi poistetaan sarakkeet, joita ei käytetä mallin ajossa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top_installers_n</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">price_limit_quantile</span> <span class="o">=</span> <span class="mf">0.95</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df_all</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="n">price_col</span><span class="p">,</span> <span class="s1">&#39;installer_name&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;dropna, df.shape:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2018</span><span class="p">)]</span>  <span class="c1"># Ensimmäinen akku 2008</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1-year, df.shape:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">customer_segment</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;RES&#39;</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1-segment, df.shape:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="n">price_q</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">price_col</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">price_limit_quantile</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">price_limit_quantile</span><span class="p">,</span> <span class="s2">&quot;quantile:&quot;</span><span class="p">,</span> <span class="n">price_q</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">price_col</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">price_q</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;price limit, df.shape:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="n">installers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;installer_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">top_installers_n</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;installer_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">installers</span><span class="p">))]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">top_installers_n</span><span class="p">,</span> <span class="s2">&quot;top installers, df.shape:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;installer_name&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]})</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">),</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;installer_name&#39;</span><span class="p">:</span> <span class="s1">&#39;i&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">])</span>

<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">customer_segment</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;df.shape:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">df_ML</span> <span class="o">=</span> <span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dropna, df.shape: (628082, 5)
1-year, df.shape: (103826, 5)
1-segment, df.shape: (101426, 5)
0.95 quantile: 5.74712643678161
price limit, df.shape: (96366, 5)
25 top installers, df.shape: (60828, 5)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    57720
1     3108
Name: battery_storage, dtype: int64
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">battery_storage</th>
    </tr>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
    </tr>
    <tr>
      <th>installer_name</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Rec Solarmmercialrp</th>
      <td>1703</td>
      <td>0.356430</td>
    </tr>
    <tr>
      <th>Sullivan Solar Power</th>
      <td>714</td>
      <td>0.221289</td>
    </tr>
    <tr>
      <th>Petersen Dean</th>
      <td>2284</td>
      <td>0.117338</td>
    </tr>
    <tr>
      <th>Sunrun</th>
      <td>5462</td>
      <td>0.104907</td>
    </tr>
    <tr>
      <th>Tesla Energy</th>
      <td>13942</td>
      <td>0.097906</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>df.shape: (60828, 27)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price_per_W</th>
      <th>battery_storage</th>
      <th>i_Citadel Roofing And Solar</th>
      <th>i_Complete Solar</th>
      <th>i_Freedom Forever</th>
      <th>i_Hooked On Solar</th>
      <th>i_Horizon Solar Power</th>
      <th>i_Infinity Energy</th>
      <th>i_Leonard Roofing</th>
      <th>i_Nb Baker Electric</th>
      <th>...</th>
      <th>i_Solcius</th>
      <th>i_Sullivan Solar Power</th>
      <th>i_Sun Solar Energy Solutions</th>
      <th>i_Sunpower Capital</th>
      <th>i_Sunrun</th>
      <th>i_Tesla Energy</th>
      <th>i_Tmag Industries Dba Stellar Solar</th>
      <th>i_V3 Electric</th>
      <th>i_Verengo</th>
      <th>i_Vivint Solar Developer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>396</th>
      <td>4.50</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2096</th>
      <td>5.12</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 27 columns</p>
</div></div></div>
</div>
</section>
<section id="mallien-ajo">
<h2>Mallien ajo<a class="headerlink" href="#mallien-ajo" title="Permalink to this headline">#</a></h2>
<p>Käytetään edellisessä lohkossa valikoitua dataa mallien koulutukseen. Aloitetaan jakamalla data opetus- ja testidataa. Tämän jälkeen tehdään hinnan skaalaus välille [0, 1]. Säilytetään kuitenkin alkuperäiset arvot taulukoissa <code class="docutils literal notranslate"><span class="pre">X_train_orig</span></code> ja <code class="docutils literal notranslate"><span class="pre">X_test_orig</span></code>, sillä niitä käytetään myöhemmin tulosten tarkastelussa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df_ML</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">]</span>
<span class="n">X_cols</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span>

<span class="n">X_train_orig</span><span class="p">,</span> <span class="n">X_test_orig</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">5451</span><span class="p">,</span> <span class="n">stratify</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>

<span class="n">mms</span> <span class="o">=</span> <span class="n">MinMaxScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_orig</span><span class="p">)</span>

<span class="n">X_train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mms</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_train_orig</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">X_cols</span><span class="p">)</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mms</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test_orig</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">X_cols</span><span class="p">)</span>

<span class="n">X_train</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price_per_W</th>
      <th>i_Citadel Roofing And Solar</th>
      <th>i_Complete Solar</th>
      <th>i_Freedom Forever</th>
      <th>i_Hooked On Solar</th>
      <th>i_Horizon Solar Power</th>
      <th>i_Infinity Energy</th>
      <th>i_Leonard Roofing</th>
      <th>i_Nb Baker Electric</th>
      <th>i_Petersen Dean</th>
      <th>...</th>
      <th>i_Solcius</th>
      <th>i_Sullivan Solar Power</th>
      <th>i_Sun Solar Energy Solutions</th>
      <th>i_Sunpower Capital</th>
      <th>i_Sunrun</th>
      <th>i_Tesla Energy</th>
      <th>i_Tmag Industries Dba Stellar Solar</th>
      <th>i_V3 Electric</th>
      <th>i_Verengo</th>
      <th>i_Vivint Solar Developer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.867893</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.753395</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.120914</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.737289</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.511057</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 26 columns</p>
</div></div></div>
</div>
</section>
<section id="luokittelu-ja-sen-tarkkuus">
<h2>Luokittelu ja sen tarkkuus<a class="headerlink" href="#luokittelu-ja-sen-tarkkuus" title="Permalink to this headline">#</a></h2>
<section id="gaussiannb">
<h3>GaussianNB<a class="headerlink" href="#gaussiannb" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gnb</span> <span class="o">=</span> <span class="n">GaussianNB</span><span class="p">()</span>

<span class="n">y_pred_G</span> <span class="o">=</span> <span class="n">gnb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">acs</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_G</span><span class="p">)</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_G</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Accuracy: </span><span class="si">{</span><span class="n">acs</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cm</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Accuracy: 0.5633733355252343
[[9352 7965]
 [   3  929]]
</pre></div>
</div>
</div>
</div>
</section>
<section id="complementnb">
<h3>ComplementNB<a class="headerlink" href="#complementnb" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">clf</span> <span class="o">=</span> <span class="n">ComplementNB</span><span class="p">()</span>

<span class="n">y_pred_C</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">acs</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_C</span><span class="p">)</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_C</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Accuracy: </span><span class="si">{</span><span class="n">acs</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cm</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Accuracy: 0.6480903063181545
[[10937  6380]
 [   42   890]]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="mita-luokittelu-kaytannossa-teki">
<h2>Mitä luokittelu käytännössä teki?<a class="headerlink" href="#mita-luokittelu-kaytannossa-teki" title="Permalink to this headline">#</a></h2>
<p>Analyysin syventämiseksi piirretään kuvaajat molemmille malleille sekä alkuperäiselle testisetin datalle. Ilman akkua olevien järjestelmien hintajakauma on kuvassa ylärivillä ja akkujärjestelmien alarivillä.</p>
<p>Tulokset kootaan ensin yhteen taulukkoon (DataFrame).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;model&#39;</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">X_test_orig</span><span class="o">.</span><span class="n">index</span>

<span class="n">df_1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">X_test_orig</span><span class="p">,</span> <span class="n">y_test</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_1</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;original&#39;</span>

<span class="n">df_2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">X_test_orig</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">y_pred_G</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">ind</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">)],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_2</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;gaussian&#39;</span>

<span class="n">df_3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">X_test_orig</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">y_pred_C</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">ind</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">)],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_3</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;complement&#39;</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_1</span><span class="p">,</span> <span class="n">df_2</span><span class="p">,</span> <span class="n">df_3</span><span class="p">])</span>

<span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span>
  <span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">price_col</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">,</span>
  <span class="n">binwidth</span><span class="o">=</span><span class="mf">.2</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">facet_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">margin_titles</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/naive_bayes_batteries_13_0.png" src="../_images/naive_bayes_batteries_13_0.png" />
</div>
</div>
<p>Saattoi olla odotettuakin, että Bayes-luokittelijat luokittelevat 5,0-5,2 kohdalla olevan piikin pääsääntöisesti akullisiksi, sillä kyseessä on suurimmaksi osaksi Tesla Energyn samanhintaiset asennukset, joista vain osassa on tietoja akusta. Malli on siis ainakin jossain määrin toiminut niin kuin odotettiin, kun se tulkitsi hinnan ja asentajan perusteella lähes kaikki samassa ryppäässä olleet asennukset akullisiksi.</p>
<p>Mallien tarkkuus jää toki epätarkaksi. Se on toisaalta hyvä merkki, sillä oletus oli, että potentiaalisia akkujärjestelmiä on löydettävissä enemmän kuin mitä datan varmemmat merkit antavat ymmärtää. Mallin varsinaista tarkkuutta ei taas toisaalta voida laskea, koska tarkastusdataa ei oletettujen puutteiden vuoksi ole. Toisin sanoen mallien hyvyyden arviointi on tehtävä vain tuloksen järkevyyden ja realistisuuden perusteella.</p>
<section id="akkujarjestelmien-osuus">
<h3>Akkujärjestelmien osuus<a class="headerlink" href="#akkujarjestelmien-osuus" title="Permalink to this headline">#</a></h3>
<p>Lasketaan vielä akkujärjestelmien osuus kaikista asennuksista kullekin mallille.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">model</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;battery_storage&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">]}))</span>
<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">model</span><span class="p">,</span> <span class="s1">&#39;battery_storage&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">price_col</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]}))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>battery_storage</th>
    </tr>
    <tr>
      <th></th>
      <th>mean</th>
    </tr>
    <tr>
      <th>model</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>complement</th>
      <td>0.398378</td>
    </tr>
    <tr>
      <th>gaussian</th>
      <td>0.487369</td>
    </tr>
    <tr>
      <th>original</th>
      <td>0.051071</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="2" halign="left">price_per_W</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
    </tr>
    <tr>
      <th>model</th>
      <th>battery_storage</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">complement</th>
      <th>0</th>
      <td>10979</td>
      <td>3.935727</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7270</td>
      <td>4.445270</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">gaussian</th>
      <th>0</th>
      <td>9355</td>
      <td>3.968283</td>
    </tr>
    <tr>
      <th>1</th>
      <td>8894</td>
      <td>4.317986</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">original</th>
      <th>0</th>
      <td>17317</td>
      <td>4.117060</td>
    </tr>
    <tr>
      <th>1</th>
      <td>932</td>
      <td>4.541122</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Alkuperäisessä datassa osuus on noin 5 %. Tämä täsmää hyvin dataa analysoineen <em>Lawrence Berkeley National Laboratory</em>:n laskelmiin, mikä herättää epäilyksiä aikaisemmin tehdyn oletuksen pätevyydestä. Oletus, että akkujärjestelmiä olisi enemmän kuin akuista on tietoa, saattaa sittenkin olla väärä. Ehkä sama hinnan ja tehon suhde järjestelmille akulla ja ilman esimerkiksi Tesla Energyn kohdalla johtuu jostain muusta syystä, kuten virheistä hintatiedoissa. Esikäsittelyvaiheessa tuskin onnistuttiin korjaamaan kaikkia epäselvyyksiä hinnoista.</p>
<section id="mallin-tuloksia-asentajien-mukaan">
<h4>Mallin tuloksia asentajien mukaan<a class="headerlink" href="#mallin-tuloksia-asentajien-mukaan" title="Permalink to this headline">#</a></h4>
<p>Tarkastellaan myös asentajakohtaisesti miten mallit ovat luokitelleet akkuja.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i_cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c1"># Kaikki mukana olleet asentajat</span>
<span class="n">installers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">i_cols</span><span class="p">)):</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i_cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;i_&#39;</span><span class="p">)):</span>
    <span class="n">installers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i_cols</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="c1"># Valitaan vain osa näytille</span>
<span class="n">installers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;i_Complete Solar&#39;</span><span class="p">,</span> <span class="s1">&#39;i_Freedom Forever&#39;</span><span class="p">,</span> <span class="s1">&#39;i_Nb Baker Electric&#39;</span><span class="p">,</span> <span class="s1">&#39;i_Rec Solarmmercialrp&#39;</span><span class="p">]</span>

<span class="c1"># Tulostus</span>
<span class="k">for</span> <span class="n">installer</span> <span class="ow">in</span> <span class="n">installers</span><span class="p">:</span>
  <span class="n">df_1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">installer</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)]</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">installer</span><span class="p">)</span>
  <span class="n">display</span><span class="p">(</span><span class="n">df_1</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">model</span><span class="p">,</span> <span class="s1">&#39;battery_storage&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">price_col</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">]}))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>i_Complete Solar
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="4" halign="left">price_per_W</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>model</th>
      <th>battery_storage</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>complement</th>
      <th>0</th>
      <td>188</td>
      <td>4.002635</td>
      <td>1.136973</td>
      <td>5.747126</td>
    </tr>
    <tr>
      <th>gaussian</th>
      <th>0</th>
      <td>188</td>
      <td>4.002635</td>
      <td>1.136973</td>
      <td>5.747126</td>
    </tr>
    <tr>
      <th>original</th>
      <th>0</th>
      <td>188</td>
      <td>4.002635</td>
      <td>1.136973</td>
      <td>5.747126</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>i_Freedom Forever
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="4" halign="left">price_per_W</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>model</th>
      <th>battery_storage</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>complement</th>
      <th>0</th>
      <td>359</td>
      <td>4.061132</td>
      <td>1.355285</td>
      <td>5.744048</td>
    </tr>
    <tr>
      <th>gaussian</th>
      <th>0</th>
      <td>359</td>
      <td>4.061132</td>
      <td>1.355285</td>
      <td>5.744048</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">original</th>
      <th>0</th>
      <td>356</td>
      <td>4.049282</td>
      <td>1.355285</td>
      <td>5.744048</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>5.467362</td>
      <td>5.300000</td>
      <td>5.598984</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>i_Nb Baker Electric
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="4" halign="left">price_per_W</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>model</th>
      <th>battery_storage</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>complement</th>
      <th>0</th>
      <td>540</td>
      <td>3.720394</td>
      <td>1.361111</td>
      <td>5.722462</td>
    </tr>
    <tr>
      <th>gaussian</th>
      <th>1</th>
      <td>540</td>
      <td>3.720394</td>
      <td>1.361111</td>
      <td>5.722462</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">original</th>
      <th>0</th>
      <td>521</td>
      <td>3.691994</td>
      <td>1.361111</td>
      <td>5.722462</td>
    </tr>
    <tr>
      <th>1</th>
      <td>19</td>
      <td>4.499158</td>
      <td>3.130435</td>
      <td>5.400000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>i_Rec Solarmmercialrp
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="4" halign="left">price_per_W</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>model</th>
      <th>battery_storage</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>complement</th>
      <th>1</th>
      <td>520</td>
      <td>2.976083</td>
      <td>1.308647</td>
      <td>5.595238</td>
    </tr>
    <tr>
      <th>gaussian</th>
      <th>1</th>
      <td>520</td>
      <td>2.976083</td>
      <td>1.308647</td>
      <td>5.595238</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">original</th>
      <th>0</th>
      <td>331</td>
      <td>2.676531</td>
      <td>1.308647</td>
      <td>5.350379</td>
    </tr>
    <tr>
      <th>1</th>
      <td>189</td>
      <td>3.500696</td>
      <td>1.987687</td>
      <td>5.595238</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Kun valittiin 25 eniten asennuksia tehnyttä asentajaa, näiden joukossa oli paljon niitä asentajia, jotka eivät ole asentaneet akkuja. Näiden kohdalla mallit eivät ole luokitelleet yhtään järjestelmää akulliseksi.</p>
<p>Akkuja asentaneiden kohdalla tilanne on toinen. Mallit joko olettavat asentajan kaikki asennukset akullisiksi tai akuttomiksi. Hinnan merkitys siis katoaa.</p>
<p>Jos mallinnukseen valittavien asentajien määrää lasketaan alle viiteen, hinnan vaikutus alkaa näkyä.</p>
</section>
</section>
</section>
<section id="loppupaatelmat">
<h2>Loppupäätelmät<a class="headerlink" href="#loppupaatelmat" title="Permalink to this headline">#</a></h2>
<p>Tulos sekä antoi vastauksia että jätti kysymyksiä. Ehkäpä jokin muu malli olisi antanut parempia tuloksia, mutta näissäkin tuloksissa riittäisi vielä tutkittavaa.</p>
<p>Viimeisimpänä tutkittu luokittelun tulos asentajittain osoitti, että luokittelijoiden päätökset perustuvat käytännössä lähes täysin asentajaan. Hintakin vaikuttaa, mutta vain pieni joukko halvimpia asennuksia luokitellaan akuttomaksi.</p>
<p>Ajamalla koko mallin eri <code class="docutils literal notranslate"><span class="pre">top_installers_n</span></code> arvoilla voi huomata, että pienillä arvoilla hinnalla on enemmän vaikutusta. Kun muuttujan arvo on noin 10 tai suurempi, hinnan merkitys näyttää katoavan kokonaan.</p>
<p>Akun vaikutusta hintaan voisi tutkia myös lineaarisella regressiomallilla.</p>
<section id="havainto-datasta">
<h3>Havainto datasta<a class="headerlink" href="#havainto-datasta" title="Permalink to this headline">#</a></h3>
<p>Tätä luokittelua tehdessä käsitys datasta muuttui akkujen osalta huomattavasti. Epäily siitä, että akkukomponenttien tietoja puuttuisi datasta huomattavan paljon vaihtui voimistuneeseen epäilyyn siitä, että osaa datan hintatiedoista on joko vääristelty tai niissä huomioidaan vain osa asennuksen kustannuksista vaihtelevin tavoin.</p>
<p>Ristiriitaisuus johtuu pääosin oletuksesta, että asennuksen hinnan [$/W] pitäisi olla selvästi korkeampi akulla kuin ilman akkua, mutta samalla asentajallakin on datassa samanhintaisia asennuksia akulla ja ilman (esimerkiksi Tesla Energy). Joko oletus on väärin, hinnat ovat osin väärin tai <em>Lawrence Berkeley National Laboratory</em> on laskenut akut väärin. Todennäköisimmin suurin ongelma näistä on hintojen täsmällisyys ja vertailukelpoisuus.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Tehtava-04"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../docs/70-Jupyter-Book/akkuluokittelu.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Akkuluokittelu</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../Tehtava-05/battery_classification.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Usean mallin luokittelua akkujärjestelmille</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By TE-team<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>